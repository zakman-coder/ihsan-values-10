<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Ihsan Project: Guiding the Ummah to Excellence - Maximally Advanced</title>

  <link rel="manifest" href="/manifest.json">

  <script src="https://cdn.tailwindcss.com"></script>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800;900&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css" />

  <style>
    body { font-family: 'Inter', sans-serif; }
    .section { padding-top: 6rem; padding-bottom: 6rem; }

    /* New Advanced Color Palette: Sapphire Blue (Primary) and Gold (Accent) */
    .bg-primary { background-color: #1e3a8a; } /* Blue 800 (Deep Sapphire) */
    .bg-primary-dark { background-color: #1e40af; } /* Blue 700 */
    .text-primary { color: #1e3a8a; }
    .border-primary { border-color: #1e3a8a; }
    .bg-accent { background-color: #d97706; } /* Amber 700 (Deep Gold/Ochre) */
    .text-accent { color: #d97706; }
    
    /* Dynamic Geometric Divider with Sapphire/Gold */
    .geometric-divider { 
        height: 8px; 
        background: repeating-linear-gradient(45deg, #1e3a8a, #1e3a8a 15px, #d97706 15px, #d97706 30px); 
        border-radius: 9999px; 
        margin: 6rem auto; 
        width: 90%; 
        max-width: 1000px; 
        opacity: 0.9; 
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    
    .utility-bar { top: 1.5rem; right: 1.5rem; }
    
    /* Advanced Hover Effects */
    .btn { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); cursor: pointer; }
    .btn:hover { transform: translateY(-2px) scale(1.01); box-shadow: 0 8px 12px rgba(0, 0, 0, 0.2); }

    /* Dark mode adjustments */
    .dark .bg-gray-50 { background-color: #0f172a; } 
    .dark .bg-white { background-color: #1f2937; }
    .dark .text-gray-800 { color: #f3f4f6; }

    /* Input focus (Sapphire glow) */
    input:focus, textarea:focus { outline: none; box-shadow: 0 0 0 4px rgba(30, 58, 138, 0.4); border-color: #1e3a8a; }
    
    /* Spinner style for dynamic loading */
    .spinner { border: 4px solid #f3f3f3; border-top: 4px solid #1e3a8a; border-radius: 50%; width: 24px; height: 24px; animation: spin 1s linear infinite; display: none; margin: 0 auto; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
  </style>
</head>
<body class="bg-gray-50 text-gray-800 antialiased transition-colors duration-500">

  <div class="fixed utility-bar z-50 flex flex-col space-y-3">
      <button id="storageToggle" class="bg-blue-500 text-white p-3 rounded-full shadow-xl hover:bg-blue-600 btn transition-transform duration-300" aria-label="Toggle Offline Storage">üíæ</button>
      <button id="darkToggle" class="bg-primary text-white p-3 rounded-full shadow-xl hover:bg-primary-dark btn transition-transform duration-300" aria-label="Toggle Dark Mode">üåô</button>
  </div>

  <a href="#home" class="fixed bottom-6 left-6 z-50 bg-gray-800 text-white p-3 rounded-full shadow-xl hover:bg-gray-700 btn transition-transform duration-300" aria-label="Back to Top">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" /></svg>
  </a>

  <header class="bg-white dark:bg-gray-900 shadow-xl sticky top-0 left-0 w-full z-40 transition-colors duration-500">
    <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
      <a href="#home" class="flex items-center space-x-3 group" aria-label="Ihsan Project Home">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#1e3a8a" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="group-hover:rotate-12 transition-transform duration-300">
          <polygon points="12 2 2 7 12 12 22 7 12 2"></polygon>
          <polyline points="2 17 12 22 22 17"></polyline>
          <polyline points="2 12 12 17 22 12"></polyline>
        </svg>
        <h1 class="text-2xl font-black text-primary dark:text-blue-400">Ihsan Project <span class="text-sm font-normal text-gray-500 dark:text-gray-400">Guiding the Ummah to Excellence</span></h1>
      </a>
      <nav class="hidden md:flex space-x-6 font-medium">
        <a href="#home" class="hover:text-primary dark:hover:text-blue-400 btn">Home</a>
        <a href="#about" class="hover:text-primary dark:hover:text-blue-400 btn">About</a>
        <a href="#core" class="hover:text-primary dark:hover:text-blue-400 btn">Concepts</a>
        <a href="#typology" class="hover:text-primary dark:hover:text-blue-400 btn">Typology</a>
        <a href="#muhasaba" class="hover:text-primary dark:hover:text-blue-400 btn">Mu·∏•ƒÅÃÅsaba</a>
        <a href="#resources" class="hover:text-primary dark:hover:text-blue-400 btn">Resources</a>
        <a href="#contact" class="hover:text-primary dark:hover:text-blue-400 btn">Contact</a>
      </nav>
      </div>
  </header>

  <section id="home" class="section pt-32 pb-24 px-4 text-center bg-gradient-to-br from-primary to-primary-dark dark:from-gray-900 dark:to-gray-950 text-white shadow-2xl" data-aos="fade-in-down">
    <h2 class="text-5xl md:text-6xl font-extrabold mb-4 drop-shadow-lg">Ihsan: The Pinnacle of Spiritual Excellence</h2>
    <p class="text-xl md:text-2xl max-w-3xl mx-auto opacity-95 mb-10">This project illuminates the path to sincere, God-conscious moral perfection in every endeavor, for the benefit of all humanity.</p>
    <a href="#muhasaba" class="bg-accent text-primary py-3 px-10 rounded-full font-bold text-lg shadow-2xl hover:bg-amber-600 btn">Start Your Self-Assessment Today</a>
  </section>

  <section id="about" class="section max-w-5xl mx-auto px-6" data-aos="fade-up">
    <span class="text-sm font-semibold text-primary uppercase block text-center">Foundational Theology</span>
    <h3 class="text-4xl font-bold text-center mb-6">Defining the MuqƒÅÃÅm al-I·∏•sƒÅn (Station of Excellence) üïã</h3>
    <p class="text-lg mb-4 leading-relaxed">**Ihsan (ÿ•ÿ≠ÿ≥ÿßŸÜ)** represents the highest spiritual station (**MuqƒÅm**), where the believer transcends mere obedience (**Islam**) and internal conviction (**Iman**) to perform all actions with **beauty and excellence (Husn)**. This level of conduct is achieved by constantly maintaining **God-Consciousness**, the state described in the *Hadith of Jibril*, where the **Prophet Muhammad (PBUH)** himself defined this sublime quality.</p>
    <p class="text-lg mb-4 leading-relaxed">For the Ihsan Project, Ihsan is the practical philosophy that demands **quality** in worship, professional life, social interactions, and environmental stewardship. It moves a person from *doing good* to *doing good perfectly*, reflecting the beautiful names and attributes of the Creator in their own conduct. This level of **moral aesthetics** is what distinguishes true spiritual depth, as taught by revered Imams and scholars throughout Islamic history.</p>
    <div class="bg-accent/10 dark:bg-gray-800 border-l-4 border-accent dark:border-amber-400 p-4 rounded-md font-semibold text-gray-700 dark:text-gray-300 shadow-md" role="alert" aria-live="polite">
      <p class="italic">‚ÄúIhsan is to worship Allah as if you see Him, for if you don't see Him, surely He sees you.‚Äù</p>
      <p class="text-sm mt-1 text-right">‚Äî The defining statement of Ihsan from the **Hadith of Jibril**, narrated by **The Prophet Muhammad (PBUH)**</p>
    </div>
  </section>

  <div class="geometric-divider"></div>

  <section id="muhasaba" class="section max-w-6xl mx-auto px-6 bg-yellow-50 dark:bg-gray-800/50" data-aos="fade-up">
    <span class="text-sm font-semibold text-accent uppercase block text-center">Algorithmic Spiritual Refinement</span>
    <h3 class="text-4xl font-bold text-center mb-10">Mu·∏•ƒÅÃÅsaba: The Behavioral Optimization Matrix ü§ñ</h3>
    <p class="text-lg max-w-4xl mx-auto text-center mb-12 dark:text-gray-300">Ihsan requires constant introspection. This tool uses advanced conceptual heuristics to provide non-judgmental, data-driven feedback on spiritual consistency and intention (IkhlƒÅs).</p>

    <div class="grid md:grid-cols-2 gap-8">
      <div class="bg-white dark:bg-gray-900 p-6 rounded-xl shadow-xl border-t-4 border-primary" data-aos="flip-up" data-aos-delay="100">
        <h4 class="text-xl font-bold mb-3 text-primary">Dynamic Focus: Fard vs. NawƒÅfil Balance ‚öñÔ∏è</h4>
        <div class="space-y-4">
            <label class="block dark:text-gray-300">
                <span class="font-semibold">Obligatory Duties (Fard) Status:</span>
                <select id="fard-status" class="w-full p-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white mt-1">
                    <option value="perfect">Perfect (5/5 Prayers on time, etc.)</option>
                    <option value="adequate">Adequate (Met minimum requirements)</option>
                    <option value="lacking">Lacking (Missed/delayed Fard duties)</option>
                </select>
            </label>
            <label class="block dark:text-gray-300">
                <span class="font-semibold">Voluntary Acts (NawƒÅfil) Count:</span>
                <input type="number" id="nawafil-count" min="0" value="3" class="w-full p-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white mt-1">
            </label>
            <div class="mt-4 text-center">
                <p id="focus-recommendation" class="text-lg font-bold text-gray-700 dark:text-gray-200">Recommendation: Balance is good. Keep steady.</p>
            </div>
        </div>
      </div>

      <div class="bg-white dark:bg-gray-900 p-6 rounded-xl shadow-xl border-t-4 border-accent" data-aos="flip-up" data-aos-delay="300">
        <h4 class="text-xl font-bold mb-3 text-accent">IkhlƒÅs Analysis & Consistency Index üìä</h4>
        <div class="space-y-4">
            <p class="text-sm dark:text-gray-300">**Action Log (Day's Reflection):**</p>
            <textarea id="reflection-input" rows="3" class="w-full p-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="Example: 'I was proud of how generously I donated today. I also managed to forgive a colleague...'"></textarea>
            
            <button id="submit-reflection" class="w-full bg-accent text-white py-2 rounded-lg font-bold hover:bg-amber-600 btn text-sm">Run Advanced Ethical Scan</button>
            
            <div id="analysis-output" class="text-sm mt-2 p-2 bg-gray-50 dark:bg-gray-700 rounded text-gray-700 dark:text-gray-300 hidden">
              <span class="font-semibold text-primary">TCI: </span><span id="tci-score" class="mr-3">N/A</span>
              <span class="font-semibold text-accent">RiyƒÅ Heuristic: </span><span id="riya-flag">N/A</span>
              <div class="spinner" id="analysis-spinner"></div>
            </div>
        </div>
      </div>
    </div>
  </section>

  <div class="geometric-divider"></div>

  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script>
    // 1. AOS animations Initialization
    AOS.init({ 
      duration: 1000, 
      once: true,
      easing: 'ease-in-out'
    });

    // 2. Dark mode toggle and persistence (Omitted for brevity)
    const darkToggle = document.getElementById('darkToggle');
    const htmlEl = document.documentElement;

    function setTheme(theme) {
      if (theme === 'dark') {
        htmlEl.classList.add('dark');
        localStorage.theme = 'dark';
        darkToggle.textContent = '‚òÄÔ∏è';
      } else {
        htmlEl.classList.remove('dark');
        localStorage.theme = 'light';
        darkToggle.textContent = 'üåô';
      }
    }

    if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      setTheme('dark');
    } else {
      setTheme('light');
    }

    darkToggle.addEventListener('click', () => {
      const newTheme = htmlEl.classList.contains('dark') ? 'light' : 'dark';
      setTheme(newTheme);
    });
    
    // 3. PWA Readiness / Conceptual Storage (Omitted for brevity)

    // 4. Dynamic Content Filter (Search Feature) - Omitted for brevity

    // 5. ADVANCED: Dynamic Fard vs. NawƒÅfil Prioritization Logic
    const fardStatus = document.getElementById('fard-status');
    const nawafilCount = document.getElementById('nawafil-count');
    const focusRecommendation = document.getElementById('focus-recommendation');

    function updateFocusRecommendation() {
        const status = fardStatus.value;
        const count = parseInt(nawafilCount.value);

        focusRecommendation.classList.remove('text-primary', 'text-accent', 'text-red-500');

        if (status === 'lacking') {
            focusRecommendation.textContent = "CRITICAL: Fard duties are lacking. Redirect all focus immediately to Obligatory Acts. Voluntary acts (NawƒÅfil) cannot compensate. (Prophetic teaching)";
            focusRecommendation.classList.add('text-red-500');
        } else if (status === 'adequate' && count > 5) {
            focusRecommendation.textContent = "WARNING: Strong NawƒÅfil effort, but Fard is only adequate. Invest energy in perfecting the obligatory duties (ItqƒÅn) before increasing voluntary volume.";
            focusRecommendation.classList.add('text-accent');
        } else if (status === 'perfect' && count >= 3) {
            focusRecommendation.textContent = "EXCELLENCE (Ihsan State): Fard is perfect, NawƒÅfil is consistent. The path of Allah's Love is achieved through both. Keep steady (IstiqƒÅmah).";
            focusRecommendation.classList.add('text-primary');
        } else {
            focusRecommendation.textContent = "Recommendation: Ensure Fard is perfect (ItqƒÅn). Then, gradually increase consistent NawƒÅfil acts.";
            focusRecommendation.classList.add('text-gray-700', 'dark:text-gray-200');
        }
    }

    if (fardStatus && nawafilCount) {
        fardStatus.addEventListener('change', updateFocusRecommendation);
        nawafilCount.addEventListener('input', updateFocusRecommendation);
        updateFocusRecommendation(); // Initial run
    }


    // 6. ADVANCED: TCI & RiyƒÅ Detection Heuristic Integration
    const submitReflection = document.getElementById('submit-reflection');
    const reflectionInput = document.getElementById('reflection-input');
    const analysisOutput = document.getElementById('analysis-output');
    const tciScore = document.getElementById('tci-score');
    const riyaFlag = document.getElementById('riya-flag');
    const analysisSpinner = document.getElementById('analysis-spinner');

    // Conceptual historical data for TCI (last 3 days' score - max 100)
    const historicalScores = [85, 90, 88]; 

    submitReflection.addEventListener('click', () => {
        const reflection = reflectionInput.value.trim().toLowerCase();
        if (reflection.length < 20) {
            alert("Please write a detailed reflection (min. 20 characters) for analysis.");
            return;
        }

        // Show loading state
        submitReflection.disabled = true;
        analysisOutput.classList.remove('hidden');
        tciScore.textContent = 'Analyzing...';
        riyaFlag.textContent = 'Scanning...';
        analysisSpinner.style.display = 'block';

        // Simulate API Call & Advanced Heuristic Processing
        setTimeout(() => {
            analysisSpinner.style.display = 'none';
            submitReflection.disabled = false;
            
            // --- TCI Calculation (Conceptual Real-time Data) ---
            const currentScore = Math.floor(Math.random() * 10) + 90; // Simulate today's score 90-99
            const averageScore = historicalScores.reduce((a, b) => a + b, 0) / historicalScores.length;
            
            let tciResult;
            if (currentScore > averageScore + 5) {
                tciResult = `${currentScore}/100 (HIGH). Significant daily uplift. Consistent improvement (IstiqƒÅmah) is noted.`;
            } else if (currentScore < averageScore - 5) {
                tciResult = `${currentScore}/100 (LOW). Deviation from recent average detected. Review the Hadith on loving 'the most constant of deeds.'`;
            } else {
                tciResult = `${currentScore}/100 (STABLE). Maintaining the path. Stability in obedience is excellence.`;
            }

            // --- RiyƒÅ Detection Heuristic (Conceptual Sentiment Analysis) ---
            let riyaResult = "None Detected.";
            const riyaKeywords = ['proud', 'told everyone', 'boast', 'people saw', 'praised', 'best day'];

            if (riyaKeywords.some(keyword => reflection.includes(keyword))) {
                riyaResult = "POTENTIAL FLAG. Reflection contains self-praise keywords. Check IkhlƒÅs: Is the deed performed for Allah or for human recognition? (Subtle Self-Monitoring Required)";
            }
            
            // 3. Display Result
            tciScore.textContent = tciResult;
            riyaFlag.textContent = riyaResult;
            
            // Update historical scores for the next conceptual run
            historicalScores.shift();
            historicalScores.push(currentScore);

        }, 2000); // 2-second simulation delay
    });


    // 7. ADVANCED: Dynamic Content Loading (Omitted for brevity)

    // 8. ADVANCED: Form Submission Handling (Omitted for brevity)
    
  </script>
</body>
</html>

